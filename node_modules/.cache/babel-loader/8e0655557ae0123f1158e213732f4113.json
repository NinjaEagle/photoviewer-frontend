{"ast":null,"code":"import _toConsumableArray from\"/Users/kevinw/projects/photoviewer-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"/Users/kevinw/projects/photoviewer-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/kevinw/projects/photoviewer-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/kevinw/projects/photoviewer-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/kevinw/projects/photoviewer-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/kevinw/projects/photoviewer-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import{Pagination,Container,Divider,Grid,Dimmer,Loader}from'semantic-ui-react';import PostCard from'../components/PostCard.js';import Filter from'../components/Filter';import'../imageindex.css';var ImageIndex=/*#__PURE__*/function(_Component){_inherits(ImageIndex,_Component);function ImageIndex(){var _getPrototypeOf2;var _this;_classCallCheck(this,ImageIndex);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(ImageIndex)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={loading:true,imageIndex:[],allImgs:[],activePage:1,dimension:'',grayScaleToggle:false};_this.initialState=function(resData){_this.setState({// loading finished so update state to false\nloading:false,imageIndex:resData,activePage:resData.page});// sessionStorage.setItem('pictures', JSON.stringify(resData))\n// let obj = JSON.parse(sessionStorage.pictures);\n// console.log(obj);\n};_this.setFilterTerm=function(term){_this.setState({dimension:term});};_this.toggleSwitch=function(evt){evt.preventDefault();_this.setState({grayScaleToggle:!_this.state.grayScaleToggle});};_this.handlePage=function(e,_ref){var activePage=_ref.activePage;var goToPage={activePage:activePage};var pagenum=goToPage.activePage;var pagestring=pagenum.toString();console.log(pagestring);_this.setState({loading:true});// const url = `http://localhost:3000/images/?page=` + pagestring\nvar url=\"https://photoviewer-backend.herokuapp.com/images/?page=\"+pagestring;fetch(url).then(function(res){return res.json();}).then(_this.initialState);};return _this;}_createClass(ImageIndex,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;// change fetch below from 20 to 21 as backend is deployed to heroku\n// fetch(`http://localhost:3000/get_All_Pictures`)\nfetch(\"https://photoviewer-backend.herokuapp.com/get_All_Pictures\").then(function(res){return res.json();}).then(function(data){return _this2.setState({allImgs:data.images});});// changed fetch below from 24 to 25\n// fetch(`http://localhost:3000/images`)\nfetch(\"https://photoviewer-backend.herokuapp.com/images\").then(function(res){return res.json();}).then(this.initialState);}},{key:\"filterPictures\",//filter dimentions function\nvalue:function filterPictures(){var _this3=this;var pictureGrid=_toConsumableArray(this.state.allImgs);var newFilteredList=[];// Filtering the spots by matching up the dimension with the dimension selected\nif(this.state.dimension===\"\")newFilteredList=_toConsumableArray(this.state.imageIndex.images);// dimension selected from filter list\nelse{newFilteredList=pictureGrid.filter(function(picture){return picture.url.includes(_this3.state.dimension);});}return newFilteredList.map(function(image){return React.createElement(Grid.Column,null,React.createElement(PostCard,{grayScaleToggle:_this3.state.grayScaleToggle,key:image.id,image:image}));});}// handles the active page and toggles through the pages\n},{key:\"render\",value:function render(){console.log(this.state);// show while pictures are not loaded\nif(this.state.loading){return React.createElement(Container,null,React.createElement(Dimmer,{active:true,inverted:true},React.createElement(Loader,null,\"Loading Images...\")));}return React.createElement(\"div\",null,React.createElement(Container,null,React.createElement(Divider,{hidden:true}),React.createElement(Container,{textAlign:\"center\"},React.createElement(\"h1\",null,\"Photo Viewer App\"),React.createElement(\"div\",{className:\"top-part\"},React.createElement(Filter,{setFilterTerm:this.setFilterTerm}),React.createElement(\"div\",{class:\"ui toggle checkbox\",onClick:this.toggleSwitch},React.createElement(\"input\",{type:\"checkbox\",name:\"public\"}),React.createElement(\"label\",null,\"Toggle Grayscale\"))),React.createElement(Divider,{hidden:true}),React.createElement(Pagination,{onPageChange:this.handlePage,size:\"mini\",siblingRange:\"4\",defaultActivePage:this.state.imageIndex.page,totalPages:this.state.imageIndex.pages})),React.createElement(Divider,{hidden:true}),React.createElement(Grid,{relaxed:true,columns:5},this.filterPictures())));}}]);return ImageIndex;}(Component);export default ImageIndex;","map":{"version":3,"sources":["/Users/kevinw/projects/photoviewer-frontend/src/components/ImageIndex.js"],"names":["React","Component","Pagination","Container","Divider","Grid","Dimmer","Loader","PostCard","Filter","ImageIndex","state","loading","imageIndex","allImgs","activePage","dimension","grayScaleToggle","initialState","resData","setState","page","setFilterTerm","term","toggleSwitch","evt","preventDefault","handlePage","e","goToPage","pagenum","pagestring","toString","console","log","url","fetch","then","res","json","data","images","pictureGrid","newFilteredList","filter","picture","includes","map","image","id","pages","filterPictures"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport {Pagination, Container, Divider, Grid, Dimmer, Loader} from 'semantic-ui-react'; \nimport PostCard from '../components/PostCard.js';\nimport Filter from '../components/Filter';\nimport  '../imageindex.css'\n\nclass ImageIndex extends Component {\n\n    state = {\n        loading: true,\n        imageIndex: [],\n        allImgs: [],\n        activePage:1,\n        dimension:'',\n        grayScaleToggle: false   \n    }\n\n    componentDidMount(){\n        // change fetch below from 20 to 21 as backend is deployed to heroku\n         // fetch(`http://localhost:3000/get_All_Pictures`)\n         fetch(\"https://photoviewer-backend.herokuapp.com/get_All_Pictures\")\n         .then(res => res.json())\n         .then(data => this.setState({allImgs: data.images}));\n        // changed fetch below from 24 to 25\n        // fetch(`http://localhost:3000/images`)\n        fetch(\"https://photoviewer-backend.herokuapp.com/images\")\n        .then(res => res.json())\n        .then(this.initialState); \n       \n    }\n\n\n    initialState = (resData) => {\n        this.setState({\n            // loading finished so update state to false\n            loading: false,\n            imageIndex: resData,\n            activePage: resData.page\n        })\n    \n        // sessionStorage.setItem('pictures', JSON.stringify(resData))\n        // let obj = JSON.parse(sessionStorage.pictures);\n        // console.log(obj);\n    }\n\n    setFilterTerm = (term) => {\n        this.setState({\n          dimension: term\n        })\n    }\n\n\n    toggleSwitch = evt => {\n        evt.preventDefault();\n            this.setState({ \n                grayScaleToggle: !this.state.grayScaleToggle,\n            })\n    }\n\n\n    //filter dimentions function\n\n    filterPictures(){\n        const pictureGrid = [...this.state.allImgs];\n        let newFilteredList = [];\n        // Filtering the spots by matching up the dimension with the dimension selected\n        if(this.state.dimension === \"\") newFilteredList = [...this.state.imageIndex.images];\n        // dimension selected from filter list\n        else {\n            newFilteredList = pictureGrid.filter(picture => picture.url.includes(this.state.dimension))\n        }\n        return(\n            newFilteredList.map(image => {\n                return( <Grid.Column>\n                    <PostCard grayScaleToggle={this.state.grayScaleToggle} key={image.id} image={image}/>\n                </Grid.Column>)\n            })\n        )\n    }\n    \n// handles the active page and toggles through the pages\n    handlePage = (e, { activePage }) => {\n        let goToPage = { activePage }\n        let pagenum = goToPage.activePage\n        let pagestring = pagenum.toString()\n        console.log(pagestring)\n        this.setState({\n        loading: true\n        })\n        // const url = `http://localhost:3000/images/?page=` + pagestring\n        const url = `https://photoviewer-backend.herokuapp.com/images/?page=`+ pagestring\n\n        fetch(url)\n        .then(res => res.json())\n        .then(this.initialState)\n    }\n\n    render(){\n        console.log(this.state)\n\n        // show while pictures are not loaded\n        if(this.state.loading){\n            return(\n                <Container>\n                <Dimmer active inverted>\n                  <Loader>Loading Images...</Loader>\n                </Dimmer>\n              </Container>\n            )\n        }\n\n        return (\n            <div>\n            <Container >\n                <Divider hidden />\n                <Container  textAlign='center'>\n                    <h1>Photo Viewer App</h1>\n                <div className=\"top-part\">\n                    <Filter setFilterTerm={this.setFilterTerm}/>\n                    <div class=\"ui toggle checkbox\" onClick={this.toggleSwitch}>\n                        <input type=\"checkbox\" name=\"public\" />\n                        <label>Toggle Grayscale</label>\n                    </div> \n                </div>\n                 <Divider hidden />\n                <Pagination  onPageChange={this.handlePage} size='mini' siblingRange=\"4\" defaultActivePage={this.state.imageIndex.page} totalPages={this.state.imageIndex.pages} />\n                </Container>\n                    <Divider hidden />\n                <Grid relaxed columns={5}>\n                {/* { this.state.imageIndex.images.map(image => {\n                    return (\n                    <Grid.Column>\n                        <PostCard key={image.id} image={image}/>\n                    </Grid.Column>)\n                }) } */}\n                  {this.filterPictures()}\n                </Grid>\n\n            </Container>\n            </div>\n        );\n    }\n}\n\nexport default ImageIndex;"]},"metadata":{},"sourceType":"module"}