{"ast":null,"code":"var _jsxFileName = \"/Users/kevinw/projects/photoviewer-frontend/src/components/ImageIndex.js\";\nimport React, { Component } from 'react';\nimport { Pagination, Container, Divider, Grid, Dimmer, Loader } from 'semantic-ui-react';\nimport PostCard from '../components/PostCard.js';\nimport Filter from '../components/Filter';\n\nclass ImageIndex extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      loading: true,\n      imageIndex: [],\n      activePage: 1,\n      dimension: ''\n    };\n\n    this.initialState = resData => {\n      console.log(resData);\n      this.setState({\n        // loading finished so update state to false\n        loading: false,\n        imageIndex: resData,\n        activePage: resData.page\n      });\n    };\n\n    this.setFilterTerm = term => {\n      console.log(term);\n      this.setState({\n        dimension: term\n      });\n    };\n\n    this.filteredPictures = () => {\n      const pictureGrid = [...this.state.imageIndex];\n      console.log(pictureGrid);\n      const imageHeight = pictureGrid.split('/')[6];\n      let filteredList = []; // Filtering the spots according to type\n\n      if (this.state.dimension === \"\") filteredList = pictureGrid;else {\n        filteredList = pictureGrid.filter(picture => picture === this.state.dimension);\n      }\n      return filteredList;\n    };\n\n    this.handlePage = (e, {\n      activePage\n    }) => {\n      let goToPage = {\n        activePage\n      };\n      let pagenum = goToPage.activePage;\n      let pagestring = pagenum.toString();\n      console.log(pagestring);\n      this.setState({\n        loading: true\n      });\n      const url = `http://localhost:3000/images/?page=` + pagestring;\n      fetch(url).then(res => res.json()).then(this.initialState);\n    };\n  }\n\n  componentDidMount() {\n    fetch(`http://localhost:3000/images`).then(res => res.json()).then(this.initialState);\n  }\n\n  // split('/')[6]\n  filterPictures() {\n    const pictureGrid = [...this.state.imageIndex.images];\n    console.log(pictureGrid);\n\n    function myFunction(image, index, arr) {\n      image => console.log(image);\n    }\n\n    ;\n    const imageDimension = pictureGrid.forEach(myFunction);\n    console.log(imageDimension);\n    let filteredList = []; // Filtering the spots according to type\n\n    if (this.state.dimension === \"\") filteredList = pictureGrid;else {\n      filteredList = pictureGrid.filter(picture => picture === this.state.dimension);\n    }\n    return filteredList.map(picture => {\n      return React.createElement(Grid, {\n        relaxed: true,\n        columns: 5,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 53\n        },\n        __self: this\n      }, this.state.imageIndex.images.map(image => {\n        return React.createElement(Grid.Column, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 56\n          },\n          __self: this\n        }, React.createElement(PostCard, {\n          key: image.id,\n          image: image,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 57\n          },\n          __self: this\n        }));\n      }));\n    });\n  }\n\n  render() {\n    console.log(this.state);\n\n    if (this.state.loading) {\n      return React.createElement(Container, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }, React.createElement(Dimmer, {\n        active: true,\n        inverted: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101\n        },\n        __self: this\n      }, React.createElement(Loader, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }, \"Loading Images...\")));\n    }\n\n    return React.createElement(Container, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }, React.createElement(Divider, {\n      hidden: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }), React.createElement(Container, {\n      textAlign: \"center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }, \"Photo Viewer App\"), React.createElement(Filter, {\n      setFilterTerm: this.setFilterTerm,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }), React.createElement(Divider, {\n      hidden: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }), React.createElement(Pagination, {\n      onPageChange: this.handlePage,\n      size: \"mini\",\n      siblingRange: \"4\",\n      defaultActivePage: this.state.imageIndex.page,\n      totalPages: this.state.imageIndex.pages,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    })), React.createElement(Divider, {\n      hidden: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }), this.filterPictures());\n  }\n\n}\n\nexport default ImageIndex;","map":{"version":3,"sources":["/Users/kevinw/projects/photoviewer-frontend/src/components/ImageIndex.js"],"names":["React","Component","Pagination","Container","Divider","Grid","Dimmer","Loader","PostCard","Filter","ImageIndex","state","loading","imageIndex","activePage","dimension","initialState","resData","console","log","setState","page","setFilterTerm","term","filteredPictures","pictureGrid","imageHeight","split","filteredList","filter","picture","handlePage","e","goToPage","pagenum","pagestring","toString","url","fetch","then","res","json","componentDidMount","filterPictures","images","myFunction","image","index","arr","imageDimension","forEach","map","id","render","pages"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport {Pagination, Container, Divider, Grid, Dimmer, Loader} from 'semantic-ui-react'; \nimport PostCard from '../components/PostCard.js';\nimport Filter from '../components/Filter';\n\nclass ImageIndex extends Component {\n\n    state = {\n        loading: true,\n        imageIndex: [],\n        activePage:1,\n        dimension:''   \n    }\n\n    componentDidMount(){\n        fetch(`http://localhost:3000/images`)\n        .then(res => res.json())\n        .then(this.initialState)\n    }\n\n    initialState = (resData) => {\n        console.log(resData)\n        this.setState({\n            // loading finished so update state to false\n            loading: false,\n            imageIndex: resData,\n            activePage: resData.page\n        })\n    }\n\n    setFilterTerm = (term) => {\n        console.log(term)\n        this.setState({\n          dimension: term\n        })\n    }\n// split('/')[6]\n    filterPictures(){\n        const pictureGrid = [...this.state.imageIndex.images];\n        console.log(pictureGrid);\n        function myFunction (image, index, arr){ image => console.log(image)};\n        const imageDimension = pictureGrid.forEach(myFunction);\n        console.log(imageDimension);\n        let filteredList = [];\n        // Filtering the spots according to type\n        if(this.state.dimension === \"\") filteredList = pictureGrid;\n        else {\n          filteredList = pictureGrid.filter(picture => \n          picture === this.state.dimension)\n        }\n        return filteredList.map(picture => {\n          return (\n            <Grid relaxed columns={5}>\n            { this.state.imageIndex.images.map(image => {\n                return (\n                <Grid.Column>\n                    <PostCard key={image.id} image={image}/>\n                </Grid.Column>)\n            }) }\n            </Grid>\n          ); \n        })\n    }\n\n    filteredPictures = () => {\n        const pictureGrid = [...this.state.imageIndex];\n        console.log(pictureGrid)\n        const imageHeight = pictureGrid.split('/')[6]\n        let filteredList = [];\n        // Filtering the spots according to type\n        if(this.state.dimension === \"\") filteredList = pictureGrid;\n        else {\n          filteredList = pictureGrid.filter(picture => \n          picture === this.state.dimension)\n         }\n         return filteredList;\n      }\n    \n\n    handlePage = (e, { activePage }) => {\n        let goToPage = { activePage }\n        let pagenum = goToPage.activePage\n        let pagestring = pagenum.toString()\n        console.log(pagestring)\n        this.setState({\n        loading: true\n        })\n        const url = `http://localhost:3000/images/?page=` + pagestring\n\n        fetch(url)\n        .then(res => res.json())\n        .then(this.initialState)\n    }\n\n    render(){\n        console.log(this.state)\n\n        if(this.state.loading){\n            return(\n                <Container>\n                <Dimmer active inverted>\n                  <Loader>Loading Images...</Loader>\n                </Dimmer>\n              </Container>\n            )\n        }\n\n        return (\n            <Container>\n                <Divider hidden />\n                <Container textAlign='center'>\n                <h1>Photo Viewer App</h1>\n                 <Filter setFilterTerm={this.setFilterTerm}/>\n                 <Divider hidden />\n                <Pagination  onPageChange={this.handlePage} size='mini' siblingRange=\"4\" defaultActivePage={this.state.imageIndex.page} totalPages={this.state.imageIndex.pages} />\n                </Container>\n                    <Divider hidden />\n                {/* <Grid relaxed columns={5}> */}\n                {/* { this.state.imageIndex.images.map(image => {\n                    return (\n                    <Grid.Column>\n                        <PostCard key={image.id} image={image}/>\n                    </Grid.Column>)\n                }) } */}\n                \n                {/* </Grid> */}\n                {this.filterPictures()}\n\n            </Container>\n        );\n    }\n}\n\nexport default ImageIndex;"]},"metadata":{},"sourceType":"module"}